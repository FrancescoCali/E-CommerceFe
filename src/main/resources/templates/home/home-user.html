<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/common.css">
    <meta charset="UTF-8">
    <title>eCommerce - home</title>
    <link rel="icon" th:href="@{/images/favicon.ico}" type="image/x-icon">
    <script type="text/javascript">
        window.onload = function() {
            if (performance.navigation.type === 2) {
                // L'utente sta tornando indietro nella cronologia
                if (window.history.replaceState) {
                    window.history.replaceState(null, null, window.location.pathname);
                }
            }
        };
    </script>
</head>
<body>

<div class="bg_page w_100 h_100">

    <header>
        <div th:insert= "~{fragments/navigation(username=${username}, role=${role})}"></div>
    </header>

    <main class="slider-sidebar flex fd_column ai_center m_0 w_100">
        <!-- Carousel -->
        <div>
            <input type="radio" name="testimonial" id="t-1" checked>
            <input type="radio" name="testimonial" id="t-2">
            <input type="radio" name="testimonial" id="t-3">
            <input type="radio" name="testimonial" id="t-4">
            <input type="radio" name="testimonial" id="t-5">
            <input type="radio" name="testimonial" id="t-6">
            <div class="testimonials">
                <label class="item" for="t-1">
                    <a th:href="@{/productUser/list(item='laptop')}">
                        <img th:src="@{/images/laptop/acer-predator-helios.png}" alt="laptop">
                    </a>
                </label>
                <label class="item" for="t-2">
                    <a th:href="@{/productUser/list(item='pc')}">
                        <img th:src="@{/images/pc/pc-fisso.png}" alt="pc">
                    </a>
                </label>
                <label class="item" for="t-3">
                    <a th:href="@{/productUser/list(item='monitor')}">
                        <img th:src="@{/images/monitor/Hp-monitor.png}" alt="monitor">
                    </a>
                </label>
                <label class="item" for="t-4">
                    <a th:href="@{/productUser/list(item='mouse')}">
                        <img th:src="@{/images/mouse/mouse-trust-nero.png}" alt="mouse">
                    </a>
                </label>
                <label class="item" for="t-5">
                    <a th:href="@{/productUser/list(item='keyboard')}">
                        <img th:src="@{/images/keyboard/keyboard-blademaster-black.png}" alt="keyboard">
                    </a>
                </label>
                <label class="item" for="t-6">
                    <a th:href="@{/productUser/list(item='components')}">
                        <img th:src="@{/images/file.png}" alt="components">
                    </a>
                </label>
            </div>
        </div>
        <!-- Navbar -->
        <nav class="flex jc_around w_50 p_075 nav_engine">
            <button class="m_0 btn_bg_none b_0 br_10 t_white">
                <label for="t-1" class="btn-std-h p_05 m_0">
                    Laptop
                </label>
            </button>
            <button class="m_0 btn_bg_none b_0 br_10 t_white">
                <label for="t-2" class="btn-std-h p_05 m_0">
                    Fissi
                </label>
            </button>
            <button class="m_0 btn_bg_none b_0 br_10 t_white">
                <label for="t-3" class="btn-std-h p_05 m_0">
                    Monitor
                </label>
            </button>
            <button class="m_0 btn_bg_none b_0 br_10 t_white">
                <label for="t-4" class="btn-std-h p_05 m_0">
                    Mouse
                </label>
            </button>
            <button class="m_0 btn_bg_none b_0 br_10 t_white">
                <label for="t-5" class="btn-std-h p_05 m_0">
                    Tastiere
                </label>
            </button>
            <button class="m_0 btn_bg_none b_0 br_10 t_white">
                <label for="t-6" class="btn-std-h p_05 m_0">
                    Componenti per Pc
                </label>
            </button>
        </nav>
    </main>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
    const radios = document.querySelectorAll('.slider-sidebar input[type="radio"]');
    const labels = document.querySelectorAll('.nav_engine label');
    let currentIndex = Array.from(radios).findIndex(radio => radio.checked);

    // Funzione per aggiornare lo stato dei filtri
    function updateFilter() {
        labels.forEach((label, index) => {
            if (radios[index].checked) {
                label.parentElement.classList.add('filter');
                label.parentElement.classList.add('t_black');
                label.style.filter = "brightness(1.2)"; // Applica il filtro al pulsante attivo
            } else {
                label.parentElement.classList.remove('filter');
                label.parentElement.classList.remove('t_black');
                label.style.filter = "none"; // Rimuove il filtro dagli altri pulsanti
            }
        });
    }

    // Aggiorna il filtro al caricamento della pagina
    updateFilter();

    // Funzione per cambiare l'immagine automaticamente ogni 15 secondi
    function changeImage() {
        radios[currentIndex].checked = false;

        // Incrementa l'indice e ciclalo se supera la lunghezza degli input
        currentIndex = (currentIndex + 1) % radios.length;

        radios[currentIndex].checked = true;
        updateFilter(); // Aggiorna lo stato del filtro durante la rotazione automatica
    }

    // Avvia l'intervallo per cambiare l'immagine
    setInterval(changeImage, 15000);

    // Aggiungi l'evento di click per ciascun pulsante
    labels.forEach((label, index) => {
        label.addEventListener('click', function() {
            currentIndex = index;

            // Aggiorna l'elemento "checked" in base al pulsante cliccato
            radios.forEach((radio, i) => {
                radio.checked = i === index;
            });

            updateFilter(); // Aggiorna lo stato del filtro quando un pulsante viene cliccato
        });
    });
});

</script>


</body>
</html>